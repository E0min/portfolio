---
title: "Javascript에서 메모리에 변수를 저장하는 방식"
date: "2024-09-29"
description: "자바스크립트에서 기본형 데이터와 참조형 데이터가 메모리에 저장되는 과정을 설명하고, 불변성과 가변성의 개념을 함께 살펴봅시다."
tags: ["자바스크립트"]
---


자바스크립트에서 메모리에 변수가 저장되는 방식은 **기본형(Primitive)**과 **참조형(Reference)** 데이터 타입에 따라 다르다. 자바스크립트는 자료형을 명시적으로 선언하지 않기 때문에, 8바이트(64비트)의 메모리를 기반으로 데이터를 처리한다. 이러한 메모리 할당 방식은 기본형과 참조형 데이터를 구분하는 중요한 기준이 된다. 자바스크립트는 기본형 데이터와 참조형 데이터로 나누어 각각의 데이터를 처리하며, 이 두 가지 데이터 타입이 메모리에 저장되고 관리되는 방식은 다르다. 이번 포스팅에서는 자바스크립트에서 기본형 데이터와 참조형 데이터가 메모리에 저장되는 과정을 설명하고, 불변성과 가변성의 개념을 함께 살펴보자.

## 🌱목표

*   기본형 데이터와 참조형 데이터가 메모리에 저장되는 방식 이해하기
*   불변성과 가변성의 개념 이해하기
*   기본형 변수의 불변성과 상수의 변경 불가능성 차이를 이해하기

## 1. 기본형 데이터가 메모리에 저장되는 과정

먼저 기본형 데이터가 메모리에 저장되는 과정을 살펴보자. 기본형 데이터 타입(숫자, 문자열, boolean, null, undefined, symbol 등)은 **불변성(immutable)**을 가진다. 불변성이란, 한 번 값이 할당되면 그 값을 변경할 수 없다는 성질을 의미한다. 자바스크립트는 기본형 데이터를 **스택(Stack) 메모리**에 저장하며, 값 자체가 메모리에 저장된다.

**예제 - 기본형 데이터의 불변성**

```javascript
let a = 10;
let b = a;  // a의 값을 b에 복사

b = 20;  // b의 값만 변경됨

console.log(a);  // 10 (a는 변경되지 않음)
console.log(b);  // 20 (b는 새 값으로 변경됨)
```

위 코드에서 `a`와 `b`는 각각 스택 메모리에서 독립된 메모리 공간을 가지며, `b`의 값이 변경되더라도 `a`는 영향을 받지 않는다. 기본형 데이터는 값 자체가 복사되기 때문에, 이러한 불변성을 유지할 수 있다. 자바스크립트는 자료형을 명시적으로 선언하지 않기 때문에 변수의 크기를 8바이트로 할당한다고 했다. 만약 범위를 넘는 숫자라면 `BigInt` 를 사용해서 더 큰 범위의 수를 저장할 수 있지만 문자라면 어떻게 할까? 그래서 기본형 데이터 중에서 **문자열(string)**은 조금 다른 방식으로 처리된다. 자바스크립트에서 문자열은 가변적 크기를 가지며, 기본형 데이터임에도 불구하고 **힙(Heap) 메모리**에 저장된다. 스택에는 문자열이 저장된 힙 메모리의 주소가 저장된다. 이처럼 문자열은 변경될 때마다 새로운 메모리 주소가 할당되고, 기존 문자열은 변경되지 않는다.

**예제 - 문자열의 힙 저장 방식**

```javascript
let str1 = "hello";
let str2 = str1;  // str1의 힙 주소를 str2가 참조

str2 = "world";  // str2는 새로운 문자열을 참조

console.log(str1);  // "hello" (str1은 변경되지 않음)
console.log(str2);  // "world" (str2는 새로운 힙 메모리 주소를 참조)
```

위 예제에서 `str1`과 `str2`는 동일한 힙 메모리의 주소를 참조하다가, `str2`가 새로운 문자열을 할당받으면서 새로운 메모리 주소를 참조하게 된다. 문자열은 기본형 데이터지만 힙 메모리에 저장된다는 점에서 특별하다.

### 변수의 불변성과 상수의 변경 가능성이 양립 가능한가?

자바스크립트에서 변수와 상수는 메모리에서 값을 변경할 수 있는지의 여부에 따라 구분된다. `let`과 `var`로 선언된 변수는 값이 변경될 수 있는 반면, `const`로 선언된 상수는 한 번 할당된 값을 변경할 수 없다. 여기서 중요한 점은 **불변성(immutable)**과 **변경 가능성(mutable)**을 혼동하지 말아야 한다. 기본형 데이터는 불변성을 가지지만, 변수가 다른 값으로 재할당될 수 있기 때문에 변경 가능하다. 불변성과 변경 가능성은 양립할 수 있는 개념이다.

> **불변성 ≠ 변경 가능하지 않다**
> **변경 가능하지 않다 == 재할당 할 수 없다** 를 기억하자

**예제 - 변수와 상수의 차이**

```javascript
const pi = 3.14;
// pi = 3.1415;  // Error: Assignment to constant variable.

let x = 5;
x = 10;  // x는 변경 가능
```

`const`로 선언된 `pi`는 재할당이 불가능하다. 하지만 `let`으로 선언된 `x`는 값이 변경 가능하다. 이는 메모리에서 해당 변수의 참조가 다른 값으로 변경될 수 있음을 의미한다.

## 2. 참조형 데이터가 메모리에 저장되는 과정

참조형 데이터(객체, 배열 등)는 자바스크립트에서 **힙(Heap) 메모리**에 저장되며, 변수는 힙 메모리의 주소를 참조하게 된다. 이 메모리 저장 방식은 **가변성(mutable)**을 가지는 특성을 만든다. 즉, 참조형 데이터는 한 번 생성된 후에도 그 내부 값을 변경할 수 있다는 뜻이다. 다시 말해 참조형 데이터는 변수가 동일한 객체나 배열을 계속 참조하면서도, 그 객체나 배열의 내용을 변경할 수 있어서 가변적이라는 것이다. 힙 메모리에 저장하는 것이 어떻게 가변적인 특성을 가지게 되는지 조금 더 알아보자.

참조형 데이터는 스택 메모리에 실제 값을 저장하는 대신, 힙 메모리에 저장된 데이터의 주소값을 변수에 저장한다. 힙 메모리는 크기가 가변적이며, 동적으로 데이터를 할당하기에 적합한 공간이다. 스택에 저장된 주소는 힙 메모리에서 데이터가 저장된 위치를 가리키며, 변수를 통해 해당 위치의 데이터를 참조할 수 있다. 스택에 저장된 주소가 가리키는 힙 메모리의 데이터가 변경 되어도 스택에 저장되는 주소는 변수를 재할당하기 전까지 바뀌지 않는다.

그래서 참조형 데이터는 값에 변경이 일어났어도(값의 변경은 힙 메모리에서 일어난다) 스택에 저장된 주소값이 바뀌지 않는다. 그러나 기본형 데이터는 값을 변경하기 위해서는 스택에 저장된 주소값 혹은 값을 새로 할당해야 한다.

이때 여러 변수가 동일한 힙 메모리의 주소를 참조할 수도 있다. 즉, 동일한 객체나 배열을 여러 변수가 가리킬 수 있으며, 그 중 하나의 변수가 값을 변경하면, 같은 주소를 참조하는 모든 변수는 변경된 데이터를 보게 된다. 이는 참조형 데이터가 가변성을 가지는 이유 중 하나이다. 변수는 동일한 메모리 주소를 계속 참조하지만, 그 주소가 가리키는 데이터 내용은 변경될 수 있기 때문이다.

**예제 - 참조형 데이터의 가변성 예시**

```javascript
let obj1 = { name: "Alice", age: 25 };
let obj2 = obj1;  // obj1의 메모리 주소를 obj2가 참조

obj2.age = 30;  // obj2를 통해 age를 변경

console.log(obj1.age);  // 30 (obj1도 영향을 받음)
console.log(obj2.age);  // 30
```

위 예제에서 `obj1`과 `obj2`는 동일한 객체를 참조하고 있다. 이때, `obj2`를 통해 `age` 속성을 변경하면, `obj1`도 동일한 메모리 주소를 참조하기 때문에 변경된 값을 확인할 수 있다.