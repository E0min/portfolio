---
title: "전역 스코프와 전역 객체를 구분해야 하는 이유"
date: "2024-09-06"
description: "var 키워드를 이용해 만드는 전역변수도 브라우저에서 window객체에 저장된다. 그러나 let이나 const를 이용해 전역변수를 만들면 window 객체에 추가되지는 않는다. 왜??"
tags: ["자바스크립트"]
---


윈도우 객체에 대해 공부하다가 이런 내용이 나왔다. `var` 를 이용해 전역 변수를 선언하면 윈도우 객체에 등록되지만 `let`이나 `const`를 사용해 전역 변수를 선언하면, 그 변수는 전역적으로 사용할 수 있지만 `window` 객체에는 등록되지 않는다. 즉, `let`이나 `const`로 선언된 전역 변수는 전역적 스코프에 존재하지만, `window` 객체의 속성으로는 등록되지 않는다는 뜻이다.

그래서 왜 `let`이나 `const`로 선언된 전역 변수는 전역적 스코프에 존재하지만, `window` 객체의 속성으로는 등록되지 않을까? 라는 궁금증이 생겨서 공부한 내용을 정리해 본다.

### `var`로 전역 변수를 선언하는 경우 - 전역변수 O, 전역 객체O

```javascript
var myVar = "Hello";
console.log(window.myVar);  // "Hello"
console.log(myVar);  // "Hello"
```

*   `var`로 선언된 전역 변수는 `window` 객체의 속성으로 등록된다.
*   따라서 `window.myVar`로 접근할 수 있으며, 전역적으로도 사용할 수 있다.
*   `var`로 선언된 변수는 `window` 객체에 종속되므로 전역 변수로 등록된다.

### `let`이나 `const`로 전역 변수를 선언하는 경우 - 전역변수 O, 전역 객체 X

```javascript
let myLet = "World";
const myConst = "JavaScript";

console.log(window.myLet);  // undefined
console.log(window.myConst);  // undefined
console.log(myLet);  // "World"
console.log(myConst);  // "JavaScript"
```

*   `let`과 `const`로 선언된 변수는 `window` 객체의 속성으로 추가되지 않는다.
*   하지만 여전히 전역 스코프에 존재하며, 그 스코프 내에서 전역적으로 접근할 수 있다.
*   `window.myLet`과 같은 방식으로는 접근할 수 없지만, 직접적으로 `myLet` 또는 `myConst`로는 사용할 수 있다.

## 왜 `var` 만 특별한건데!!

`var`는 ES5 이전의 방식으로 변수를 선언하는데, 이때 전역 변수는 자동으로 `window` 객체에 등록된다. 반면, `let`과 `const`는 ES6(ECMAScript 2015)에서 도입된 새로운 방식으로 변수를 선언한다. 이 변수들은 블록 스코프를 가지며, 전역적으로 선언되더라도 `window` 객체에 등록되지 않도록 설계되었다. 이는 전역 스코프와 전역 객체(예: `window`)를 구분하기 위한 설계상의 차이이다. 그럼 왜 설계상에 차이를 뒀을까?

전역 스코프(Global Scope)와 전역 객체(Global Object, 브라우저에서는 `window` 객체)를 구분해야 하는 이유는 **전역 변수의 관리와 안정성**에 있다. 자바스크립트의 발전 과정에서, 코드의 복잡성이 증가하고 다양한 실행 환경에서 동작해야 하는 상황이 많아지면서, 전역 변수와 전역 객체를 분리할 필요가 생겼다.

### 이유 - 1. 안정성 및 네임스페이스 오염 방지

`var`로 선언된 전역 변수는 자동으로 전역 객체인 `window` 객체에 추가된다. 이는 모든 전역 변수가 브라우저의 전역 객체에 등록된다는 의미이며, 전역 네임스페이스가 매우 쉽게 오염될 수 있다.

예를 들어, 여러 개의 자바스크립트 파일이나 라이브러리를 사용한다면, 같은 이름을 가진 전역 변수가 우연히 충돌할 가능성이 있다. 이로 인해 코드가 예기치 않게 동작하거나, 특정 기능이 제대로 실행되지 않는 문제를 발생시킬 수 있다.

```javascript
// 예를 들어, 라이브러리 A에서
var user = "Alice";

// 그리고 다른 라이브러리 B에서 같은 전역 변수를 사용했다면
var user = "Bob";  // A의 변수를 덮어씌움

console.log(user);  // "Bob"이 출력됨 (Alice가 덮어씌워짐)
```

위와 같이 `var`로 선언된 변수들은 전역 객체에 추가되면서 다른 코드와 쉽게 충돌할 수 있습니다. 이를 **전역 네임스페이스 오염**이라고 부른다. `let`과 `const`는 이러한 문제를 해결하기 위해 전역 객체에 등록되지 않고, 블록 스코프를 가지도록 설계되었다. 즉, 전역 스코프에 있어도 네임스페이스가 오염되지 않도록 안전하게 설계되었다.

### 이유 - 2. 의도치 않은 전역 변수의 생성 방지

`var`는 전역 객체와 밀접하게 연관되어 있기 때문에, 실수로 전역 변수가 생성될 수 있다. 이는 예상치 못한 동작을 유발할 수 있다.

```javascript
function myFunction() {
    testVar = "Hello";  // 'var', 'let', 'const' 없이 선언 -> 전역 변수가 됨
}

myFunction();
console.log(window.testVar);  // "Hello"
```

위 예시에서는 `testVar`가 의도치 않게 전역 변수가 되어 `window` 객체의 속성으로 추가되었다. `let`이나 `const`로 변수를 선언하면 이런 실수를 방지할 수 있습니다.

### 이유 - 3. 블록 스코프의 도입

ES6 이전의 자바스크립트는 함수 스코프를 기반으로 동작했다. 즉, 함수 내부에서만 변수가 고립되고, 그 외의 경우(예: 루프나 조건문 내부)에서는 변수가 전역으로 선언될 수 있었다. 그러나 블록 스코프의 필요성이 대두되면서 `let`과 `const`가 도입되었다.

```javascript
if (true) {
    var x = 5;
}
console.log(x);  // 5 (블록 밖에서도 접근 가능)

if (true) {
    let y = 10;
}
console.log(y);  // ReferenceError: y is not defined (블록 밖에서는 접근 불가)
```

`let`과 `const`는 블록 스코프를 제공하여, 변수가 특정 블록 안에서만 유효하게 만듭니다. 이를 통해 변수가 불필요하게 전역으로 확장되는 문제를 방지할 수 있다.

### 이유 - 4. 다양한 실행 환경에서의 이식성 증가

자바스크립트는 브라우저뿐만 아니라 Node.js와 같은 다양한 환경에서 실행될 수 있다. 브라우저의 전역 객체는 `window`, Node.js의 전역 객체는 `global`입니다. 이처럼 자바스크립트는 실행 환경에 따라 전역 객체가 다르기 때문에, 전역 스코프와 전역 객체를 구분할 필요가 있다.

예를 들어, `window` 객체는 브라우저에서만 존재하며, Node.js에서는 `window`가 없고 대신 `global` 객체가 존재한다. 따라서, `let`과 `const`를 사용하면 이런 실행 환경 간의 전역 객체 차이로부터 자유로워지며, 코드의 호환성과 이식성을 높일 수 있다.

```javascript
// Node.js 환경에서는 전역 객체가 'global'
console.log(global);  // Node.js에서의 전역 객체

// 브라우저에서는 전역 객체가 'window'
console.log(window);  // 브라우저에서의 전역 객체
```

### 이유 - 5. `use strict` 모드와의 연계

`use strict` 모드를 사용할 경우, 전역 변수가 암묵적으로 생성되는 것을 방지할 수 있다. 이는 코드의 예기치 않은 동작을 줄이고, 더 명확한 코드 작성을 유도한다.

`let`과 `const`는 `use strict` 모드에서도 강제적으로 전역 객체에 추가되지 않으므로, 코드를 더욱 안전하게 작성할 수 있게 해준다.

```javascript
"use strict";

testVar = "Hello";  // ReferenceError: testVar is not defined
```

## 정리

**전역 스코프와 전역 객체를 구분해야 하는 이유**

*   **네임스페이스 오염 방지**: 전역 객체에 너무 많은 변수가 등록되면 충돌할 가능성이 높아지기 때문에 이를 피하기 위해
*   **의도치 않은 전역 변수 생성 방지**: `let`과 `const`를 사용하면 실수로 전역 변수가 생기는 문제를 막을 수 있다.
*   **블록 스코프 제공**: 블록 스코프를 통해 변수를 특정 블록 내부에서만 사용할 수 있게 만들어, 변수가 불필요하게 전역으로 확장되는 것을 방지한다.
*   **다양한 실행 환경에서의 호환성**: 브라우저(`window`)와 Node.js(`global`)와 같은 다양한 환경에서도 호환 가능한 코드를 작성할 수 있다.
*   **코드의 명확성과 안정성**: `let`과 `const`는 `var`보다 더 명확하고 안전하게 변수를 선언할 수 있는 방법을 제공한다.